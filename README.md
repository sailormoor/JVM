# JVM

## Код для исследования
```java
public class JvmComprehension {

    public static void main(String[] args) {
        int i = 1;                      // 1
        Object o = new Object();        // 2
        Integer ii = 2;                 // 3
        printAll(o, i, ii);             // 4
        System.out.println("finished"); // 7
    }

    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5
        System.out.println(o.toString() + i + ii);  // 6
    }
}
```


1. ClassLoader подгружает основной класс JvmComprehension в область памяти и сопутствующие ему данные;
2. В стеке создается фрейм main. JVM ищет точку входа;
3. Создается переменная i равная 1 во фрейме main;
4. В куче создается новый объект Object, ссылка сначала попадает во фрейм main;
5. В куче создается новый объект Integer, ссылка сначала попадает во фрейм main;
6. Создается фрейм в Stack printAll(o, i, ii) там создаются:
* ссылка o на объект в куче Object;
* инициилизируется int i = 1 согласно переданному значению;
* ссылка ii на объект в куче Integer;
7. Создается объект Integer в куче, а ссылка на него uselessVar кладется во фрейм main;
8. Создается фрейм в Stack sout со ссылками на кучу и int i = 1 (o.toString() - тоже создает фрейм, со ссылкой на объект String);
9. После выполнения данные из фрейма начинают удалятся в соответствие с "последний зашел первый вышел", когда фрейм окажется пустым удалится и он сам из стака (также будут удалены из кучи сборщиком мусора o.toString() и Integer uselessVar);
10. После удаления всех фреймов кроме main в стак создастся новый фрейм на sout();
11. Сборщик мусора удалит из кучи все остальные объекты, так как данные объекты больше не достежимы для программы (скорее всего, тут не уверена);
12. Будет создан объект String в куче, а ссылка будет во фрейме sout();
13. После выполнения будет очищен фрейм, а после этого удален полностью. Далее будет зачищен фрейм main;
14. Stack остался пустым - программа завершила свою работу.
